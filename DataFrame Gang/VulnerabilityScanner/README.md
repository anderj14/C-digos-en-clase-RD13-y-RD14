# Esc√°ner de Vulnerabilidades

![Dashboard](https://i.imgur.com/NDIqdo7.png)

Este proyecto es un esc√°ner de vulnerabilidades web b√°sico desarrollado en Python.  
Utiliza **Scrapy** para el rastreo y an√°lisis de sitios, y presenta los resultados en un dashboard construido con **FastAPI**.  
Todo el entorno est√° contenedorizado con **Docker** para una f√°cil configuraci√≥n y ejecuci√≥n.

---

## üöÄ M√©todo Principal: Ejecuci√≥n con Docker (Recomendado)

Este es el m√©todo m√°s f√°cil y r√°pido para poner todo en marcha, ya que Docker maneja toda la configuraci√≥n por ti.

### üìã Prerrequisitos para Docker

* **Git:** Para clonar el repositorio.  
* **Docker Desktop:** Para construir y ejecutar la aplicaci√≥n contenedorizada.

### Puesta en Marcha

1. **Clonar el Repositorio**  
   Abre una terminal y clona el proyecto. Aseg√∫rate de moverte a la rama `dev`.

   ```bash
   git clone https://github.com/Marit-dev/VulnerabilityScanner.git
   cd VulnerabilityScanner
   git checkout dev
    ```

2. **Construir y Levantar la Aplicaci√≥n**
   Desde la ra√≠z del proyecto, ejecuta:

   ```bash
   docker-compose up --build
   ```

   Este comando construir√° la imagen del esc√°ner, descargar√° la imagen de OWASP Juice Shop y levantar√° ambos servicios.

3. **Acceder a las Aplicaciones**
   Una vez que los contenedores est√©n en funcionamiento, tendr√°s dos URLs disponibles:

   * **Dashboard de Hallazgos:** ‚û°Ô∏è [http://localhost:8000](http://localhost:8000)
   * **OWASP Juice Shop (Objetivo de Pruebas):** ‚û°Ô∏è [http://localhost:3000](http://localhost:3000)

---

## üî¨ C√≥mo Probar el Esc√°ner (con Docker)

1. Abre una **segunda terminal** (deja la primera corriendo `docker-compose`).
2. Desde la ra√≠z del proyecto, ejecuta el script `run-scan.sh` con la URL del objetivo que quieres analizar.

### Ejemplo 1: Sitio de Prueba B√°sico

```bash
# Si usas PowerShell en Windows:
bash run-scan.sh http://testphp.vulnweb.com/

# Si usas Git Bash, WSL o una terminal de Linux/macOS:
./run-scan.sh http://testphp.vulnweb.com/
```

### Ejemplo 2: Escaneo a OWASP Juice Shop

Para escanear la instancia de Juice Shop que se est√° ejecutando localmente, usa el nombre del servicio de Docker como host:

```bash
# Si usas PowerShell en Windows:
bash run-scan.sh http://juice-shop:3000/

# Si usas Git Bash, WSL o una terminal de Linux/macOS:
./run-scan.sh http://juice-shop:3000/
```

Cuando el escaneo finalice, **refresca el dashboard** en tu navegador para ver los resultados.

---

## üßë‚Äçüíª M√©todo Alternativo: Desarrollo Local (Sin Docker)

Si prefieres no usar Docker y ejecutar la aplicaci√≥n directamente en tu m√°quina.

### üìã Prerrequisitos Locales

* **Git**
* **Python 3.10** o superior
* **Poetry** para la gesti√≥n de dependencias.
  (Puedes instalarlo siguiendo las [instrucciones oficiales](https://python-poetry.org/docs/#installation))

### Puesta en Marcha Local

1. **Clonar el Repositorio**

   ```bash
   git clone https://github.com/Marit-dev/VulnerabilityScanner.git
   cd VulnerabilityScanner
   git checkout dev
   ```

2. **Configurar el Entorno**
   Crea un archivo llamado `.env` en la ra√≠z del proyecto y a√±ade el siguiente contenido:

   ```env
   DATABASE_URL="sqlite:///./scanner.db"
   ```

3. **Instalar Dependencias**

   ```bash
   poetry install
   ```

4. **Ejecutar Migraciones de la Base de Datos**

   ```bash
   poetry run alembic upgrade head
   ```

5. **Iniciar el Dashboard**

   ```bash
   poetry run uvicorn dashboard.main:app --reload
   ```

   Podr√°s acceder al dashboard en **[http://localhost:8000](http://localhost:8000)**

---

### üî¨ C√≥mo Probar el Esc√°ner (en Local)

1. Abre una **segunda terminal** (deja la primera corriendo el dashboard).

2. Navega al directorio del esc√°ner:

   ```bash
   cd scanner
   ```

3. Lanza la ara√±a de Scrapy con la URL que deseas escanear:

   ```bash
   poetry run scrapy crawl site_spider -a start_url=http://testphp.vulnweb.com/
   ```

4. Al finalizar, refresca tu navegador para ver los hallazgos.

---

## üèóÔ∏è Estructura del Proyecto

* **`/dashboard`**: Aplicaci√≥n web FastAPI que sirve el frontend.
* **`/scanner`**: Proyecto Scrapy con las ‚Äúara√±as‚Äù y l√≥gicas de an√°lisis (`pipelines`).
* **`/database`**: Modelo de datos (SQLAlchemy) y configuraci√≥n.
* **`/core`**: Configuraci√≥n central de la app (variables de entorno, etc.).
* **`/alembic`**: Gesti√≥n de las migraciones de la base de datos.
* **`docker-compose.yml`**: Orquesta la construcci√≥n y ejecuci√≥n de contenedores.
* **`Dockerfile`**: Instrucciones para construir la imagen de Docker.

---

## üõ†Ô∏è Stack

* **Backend:** FastAPI
* **Web Scraping/Crawling:** Scrapy
* **Base de Datos:** SQLite (Con SQLAlchemy y Alembic)
* **Frontend:** HTML5, CSS3, Jinja2
* **Contenedorizaci√≥n:** Docker, Docker Compose
* **Gesti√≥n de Dependencias:** Poetry
