#!/bin/bash

# Uso: ./run-scan.sh <URL_A_ESCANEAR>

if [ -z "$1" ]; then
  echo "âŒ Error: Debes proporcionar una URL para escanear."
  echo "Ejemplo: ./run-scan.sh http://testphp.vulnweb.com/"
  exit 1
fi

URL_TO_SCAN=$1

echo "ğŸš€ Iniciando escaneo de vulnerabilidades para: $URL_TO_SCAN"

docker-compose exec app bash -c "cd /app/scanner && scrapy crawl site_spider -a start_url=$URL_TO_SCAN"

echo "âœ… Â¡Escaneo finalizado!"
echo "ğŸ‘‰ Navega a http://localhost:8000 para ver los resultados."
